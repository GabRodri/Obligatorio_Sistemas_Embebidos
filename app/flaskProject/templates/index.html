<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti贸n de Eventos y Funcionarios</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Sistema de Gesti贸n de Eventos y Funcionarios</h1>
            <p>Base de datos: <strong>Database.db</strong> </p>
        </header>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }}">{{ message }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        
        <nav>
            <ul>
                <li><a href="{{ url_for('index') }}">Inicio</a></li>
                <li><a href="{{ url_for('gestion_funcionarios') }}">Gesti贸n de Funcionarios</a></li>
                <li><a href="{{ url_for('ver_eventos') }}">Ver Eventos</a></li>
                <li><a href="{{ url_for('consultar_eventos') }}">Consultar por Fecha</a></li>

                <!--  Nueva pesta帽a agregada -->
                <li><a href="{{ url_for('historico_alarmas') }}">Hist贸rico de Alarmas</a></li>
                <!--  Fin nueva pesta帽a -->

            </ul>
        </nav>

        <main>
            <div class="welcome">
                <h2>Bienvenido al Sistema</h2>
                <p>Sistema listo para usar. Comience agregando funcionarios.</p>
                <div class="options">
                    <a href="{{ url_for('gestion_funcionarios') }}" class="btn btn-primary">
                         Comenzar - Gestionar Funcionarios
                    </a>
                    <a href="{{ url_for('ver_eventos') }}" class="btn btn-secondary">
                         Ver Eventos
                    </a>
                    <a href="{{ url_for('consultar_eventos') }}" class="btn btn-warning">
                         Consultar por Fecha
                    </a>
                </div>
            </div>

            <div class="stats-section">
                <h2>Estado del Sistema</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Funcionarios</h3>
                        <p class="stat-number">{{ estadisticas.total_funcionarios }}</p>
                        <small>{% if estadisticas.total_funcionarios == 0 %}Agregue el primer funcionario{% endif %}</small>
                    </div>
                    <div class="stat-card">
                        <h3>Total Eventos</h3>
                        <p class="stat-number">{{ estadisticas.total_eventos }}</p>
                        <small>{% if estadisticas.total_eventos == 0 %}No hay eventos registrados{% endif %}</small>
                    </div>
                    <div class="stat-card">
                        <h3>Accesos Autorizados</h3>
                        <p class="stat-number">{{ estadisticas.auth_stats.get(1, 0) }}</p>
                    </div>
                    <div class="stat-card">
                        <h3>Accesos Denegados</h3>
                        <p class="stat-number">{{ estadisticas.auth_stats.get(0, 0) }}</p>
                    </div>
                </div>
            </div>

            <div class="info-section">
                <h2>驴C贸mo comenzar?</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <h3> Paso 1: Agregar Funcionarios</h3>
                        <p>Vaya a <strong>"Gesti贸n de Funcionarios"</strong> y agregue los funcionarios que tendr谩n acceso al sistema.</p>
                        <a href="{{ url_for('gestion_funcionarios') }}" class="btn btn-primary btn-sm">Ir a Gesti贸n de Funcionarios</a>
                    </div>
                    <div class="feature-card">
                        <h3> Paso 2: Ver Eventos</h3>
                        <p>Los eventos se registrar谩n autom谩ticamente cuando los funcionarios usen el sistema.</p>
                        <a href="{{ url_for('ver_eventos') }}" class="btn btn-secondary btn-sm">Ver Eventos</a>
                    </div>
                    <div class="feature-card">
                        <h3> Paso 3: Consultar Por Fechas</h3>
                        <p>Filtre los eventos por fechas espec铆ficas para visualizaci贸n.</p>
                        <a href="{{ url_for('consultar_eventos') }}" class="btn btn-warning btn-sm">Consultar por Fecha</a>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
